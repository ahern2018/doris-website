"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["740300"],{474615:function(e,n,r){r.r(n),r.d(n,{metadata:()=>i,contentTitle:()=>c,default:()=>h,assets:()=>o,toc:()=>l,frontMatter:()=>d});var i=JSON.parse('{"id":"install/preparation/env-checking","title":"Environment Checking","description":"\x3c!--","source":"@site/versioned_docs/version-2.1/install/preparation/env-checking.md","sourceDirName":"install/preparation","slug":"/install/preparation/env-checking","permalink":"/docs/install/preparation/env-checking","draft":false,"unlisted":false,"tags":[],"version":"2.1","frontMatter":{"title":"Environment Checking","language":"en"},"sidebar":"docs","previous":{"title":"Quick Start","permalink":"/docs/gettingStarted/quick-start"},"next":{"title":"Cluster Planning","permalink":"/docs/install/preparation/cluster-planning"}}'),t=r("785893"),s=r("250065");let d={title:"Environment Checking",language:"en"},c=void 0,o={},l=[{value:"Hardware Environment Check",id:"hardware-environment-check",level:2},{value:"CPU Check",id:"cpu-check",level:3},{value:"Memory Check",id:"memory-check",level:3},{value:"Storage Check",id:"storage-check",level:3},{value:"File System Check",id:"file-system-check",level:3},{value:"Network Card Check",id:"network-card-check",level:3},{value:"Server Configuration Recommendations",id:"server-configuration-recommendations",level:2},{value:"Disk Space Calculation",id:"disk-space-calculation",level:2},{value:"Java Environment Check",id:"java-environment-check",level:2}];function a(e){let n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"When deploying Doris, the following checks need to be performed for the hardware and software environment:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Hardware Environment Check"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Recommended Server Configuration"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Disk Space Calculation"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Java Environment Check"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"hardware-environment-check",children:"Hardware Environment Check"}),"\n",(0,t.jsx)(n.p,{children:"During the hardware environment check, the following hardware conditions should be examined:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Check Item"}),(0,t.jsx)(n.th,{children:"Expected Result"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CPU"}),(0,t.jsx)(n.td,{children:"Should support AVX2 instruction set."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Memory"}),(0,t.jsx)(n.td,{children:"Recommended at least 4 times the CPU size."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Storage"}),(0,t.jsx)(n.td,{children:"SSD recommended."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"File System"}),(0,t.jsx)(n.td,{children:"ext4 or xfs file system."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Network Card"}),(0,t.jsx)(n.td,{children:"10 Gigabit network card."})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"cpu-check",children:"CPU Check"}),"\n",(0,t.jsx)(n.p,{children:"When installing Doris, it is recommended to choose a machine that supports the AVX2 instruction set to leverage the vectorization capabilities of AVX2 for query acceleration."}),"\n",(0,t.jsx)(n.p,{children:"Run the following command to check if the machine supports the AVX2 instruction set:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cat /proc/cpuinfo | grep avx2\n"})}),"\n",(0,t.jsx)(n.p,{children:"If the machine does not support the AVX2 instruction set, you can use the no AVX2 Doris installation package for deployment."}),"\n",(0,t.jsx)(n.h3,{id:"memory-check",children:"Memory Check"}),"\n",(0,t.jsx)(n.p,{children:"Doris does not have strict memory limits. Generally, for production environments, you can choose the memory size based on the following recommendations:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component"}),(0,t.jsx)(n.th,{children:"Recommended Memory Configuration"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"FE"}),(0,t.jsx)(n.td,{children:"At least 16GB recommended."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BE"}),(0,t.jsx)(n.td,{children:"Memory should be at least 4 times the number of CPU cores (for example, for a 16-core machine, at least 64GB memory is recommended). Better performance can be achieved with memory 8 times the number of CPU cores."})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"storage-check",children:"Storage Check"}),"\n",(0,t.jsx)(n.p,{children:"Doris allows data to be stored on SSD, HDD, or object storage during deployment."}),"\n",(0,t.jsx)(n.p,{children:"SSD is recommended for data storage in the following scenarios:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"High-concurrency point query scenarios with large-scale data"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"High-frequency data update scenarios with large-scale data"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"file-system-check",children:"File System Check"}),"\n",(0,t.jsx)(n.p,{children:"Doris recommends using EXT4 or XFS file systems. The EXT4 file system offers good stability, performance, and lower fragmentation issues. The XFS file system performs excellently in handling large-scale data and high-concurrency write operations, making it suitable for high-throughput applications."}),"\n",(0,t.jsx)(n.h3,{id:"network-card-check",children:"Network Card Check"}),"\n",(0,t.jsx)(n.p,{children:"Doris involves distributing data partitions across different instances for parallel processing, which results in some network resource overhead. To optimize Doris performance and reduce network resource overhead, it is strongly recommended to use a 10 Gigabit Ethernet (10GbE) or faster network during deployment. If multiple network cards are available, it is recommended to use link aggregation to combine multiple network cards into one virtual interface, which improves network bandwidth, redundancy, and complex balancing capabilities."}),"\n",(0,t.jsx)(n.h2,{id:"server-configuration-recommendations",children:"Server Configuration Recommendations"}),"\n",(0,t.jsx)(n.p,{children:"Doris can be deployed on x86-64 or ARM64 architecture server platforms."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Development and Testing Environments"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Module"}),(0,t.jsx)(n.th,{children:"CPU"}),(0,t.jsx)(n.th,{children:"Memory"}),(0,t.jsx)(n.th,{children:"Disk"}),(0,t.jsx)(n.th,{children:"Network"}),(0,t.jsx)(n.th,{children:"Minimum Instance Count"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Frontend"}),(0,t.jsx)(n.td,{children:"8 cores +"}),(0,t.jsx)(n.td,{children:"8 GB+"}),(0,t.jsx)(n.td,{children:"SSD or SATA, 10 GB+"}),(0,t.jsx)(n.td,{children:"Gigabit/Ten-Gigabit"}),(0,t.jsx)(n.td,{children:"1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Backend"}),(0,t.jsx)(n.td,{children:"8 cores +"}),(0,t.jsx)(n.td,{children:"16 GB+"}),(0,t.jsx)(n.td,{children:"SSD or SATA, 50 GB+"}),(0,t.jsx)(n.td,{children:"Gigabit/Ten-Gigabit"}),(0,t.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"In the test validation environment, you can deploy FE and BE on the same server."}),"\n",(0,t.jsx)(n.li,{children:"It is generally recommended to deploy only one BE instance per machine and only one FE instance."}),"\n",(0,t.jsx)(n.li,{children:"If 3 replicas of data are required, at least 3 machines should each deploy one BE instance, instead of deploying 3 instances on a single machine."}),"\n"]})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Production Environments"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Module"}),(0,t.jsx)(n.th,{children:"CPU"}),(0,t.jsx)(n.th,{children:"Memory"}),(0,t.jsx)(n.th,{children:"Disk"}),(0,t.jsx)(n.th,{children:"Network"}),(0,t.jsx)(n.th,{children:"Minimum Instance Count"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Frontend"}),(0,t.jsx)(n.td,{children:"16 cores +"}),(0,t.jsx)(n.td,{children:"64 GB+"}),(0,t.jsx)(n.td,{children:"SSD or RAID card, 100 GB+"}),(0,t.jsx)(n.td,{children:"10-Gigabit"}),(0,t.jsx)(n.td,{children:"1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Backend"}),(0,t.jsx)(n.td,{children:"16 cores +"}),(0,t.jsx)(n.td,{children:"64 GB+"}),(0,t.jsx)(n.td,{children:"SSD or SATA, 100 GB+"}),(0,t.jsx)(n.td,{children:"10-Gigabit"}),(0,t.jsx)(n.td,{children:"3"})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"In production environments, if FE and BE are mixed, attention should be paid to resource contention. It is recommended to store metadata and data on separate disks."}),"\n",(0,t.jsx)(n.li,{children:"BE nodes can be configured with multiple hard drives, binding multiple HDDs or SSDs on a single BE instance."}),"\n",(0,t.jsx)(n.li,{children:"The performance of the cluster depends on the resources of the BE nodes. The more BE nodes, the better the Doris performance. Typically, Doris can fully perform on clusters with 10 to 100 machines."}),"\n"]})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"disk-space-calculation",children:"Disk Space Calculation"}),"\n",(0,t.jsx)(n.p,{children:"In the Doris cluster, FE (Frontend) is mainly used for metadata storage, including metadata edit logs and images. BE (Backend) disk space is primarily used for storing data, and it needs to be calculated based on business requirements."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component"}),(0,t.jsx)(n.th,{children:"Disk Space Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"FE"}),(0,t.jsx)(n.td,{children:"It is recommended to reserve more than 100 GB of storage space, using SSD disks."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BE"}),(0,t.jsx)(n.td,{children:"Doris uses LZ4 compression by default. The compression ratio is around 0.3 - 0.5. Disk space should be calculated as total data volume * 3 (for 3 replicas), and 40% of the space should be reserved for backend compaction and temporary data storage."})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"java-environment-check",children:"Java Environment Check"}),"\n",(0,t.jsx)(n.p,{children:"All Doris processes depend on Java."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["For versions prior to 2.1, use Java 8. Recommended version: ",(0,t.jsx)(n.code,{children:"openjdk-8u352-b08-linux-x64"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["For versions 3.0 and later, use Java 17. Recommended version: ",(0,t.jsx)(n.code,{children:"jdk-17.0.10_linux-x64_bin.tar.gz"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return d}});var i=r(667294);let t={},s=i.createContext(t);function d(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);